# BookWith é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€BookWith ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼ãƒ»é–‹ç™ºè€…å‘ã‘ã«ã€é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰æ‰‹é †ã‚’è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“š ç›®æ¬¡

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
- [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
- [ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ](#ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ)
- [è©³ç´°ãªç’°å¢ƒæ§‹ç¯‰æ‰‹é †](#è©³ç´°ãªç’°å¢ƒæ§‹ç¯‰æ‰‹é †)
- [é–‹ç™ºãƒ•ãƒ­ãƒ¼](#é–‹ç™ºãƒ•ãƒ­ãƒ¼)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
- [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ)
- [è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](#è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³)

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

BookWith ã¯ã€AI é§†å‹•ã®æ¬¡ä¸–ä»£ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ ePub ãƒªãƒ¼ãƒ€ãƒ¼ã§ã™ã€‚æ›¸ç±å†…å®¹ã‚’ç†è§£ã—ãŸ AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¨ã®å¯¾è©±ã‚’é€šã˜ã¦ã€ã‚ˆã‚Šæ·±ã„èª­æ›¸ä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Next.js + TypeScript)                    â”‚
â”‚  ãƒ»Pages Router                                         â”‚
â”‚  ãƒ»ePub.js ã«ã‚ˆã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°                              â”‚
â”‚  ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ AIå¯¾è©±                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ APIé€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (FastAPI + Python)                          â”‚
â”‚  ãƒ»DDD ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£                             â”‚
â”‚  ãƒ»LangChain ã«ã‚ˆã‚‹ AI çµ±åˆ                               â”‚
â”‚  ãƒ»è¨˜æ†¶ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢                                             â”‚
â”‚  ãƒ»Supabase (ãƒ¡ã‚¤ãƒ³DB)                                 â”‚
â”‚  ãƒ»Weaviate (ãƒ™ã‚¯ãƒˆãƒ«DB)                                  â”‚
â”‚  ãƒ»GCS ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ (é–‹ç™ºç”¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›  å‰ææ¡ä»¶

### å¿…é ˆãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ«         | ãƒãƒ¼ã‚¸ãƒ§ãƒ³  | ç¢ºèªæ–¹æ³•                 |
| -------------- | ----------- | ------------------------ |
| Node.js        | 18.0.0 ä»¥ä¸Š | `node -v`                |
| pnpm           | 9.15.4      | `pnpm -v`                |
| Python         | 3.13 ä»¥ä¸Š   | `python --version`       |
| Poetry         | æœ€æ–°ç‰ˆ      | `poetry --version`       |
| Docker         | æœ€æ–°ç‰ˆ      | `docker --version`       |
| Docker Compose | v2 ä»¥ä¸Š     | `docker compose version` |

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

#### pnpm ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# Node.js ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆ
npm install -g pnpm@9.15.4

# ã¾ãŸã¯ Homebrew (macOS)
brew install pnpm
```

#### Poetry ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# å…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼
curl -sSL https://install.python-poetry.org | python3 -

# ã¾ãŸã¯ Homebrew (macOS)
brew install poetry
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§é–‹ç™ºç’°å¢ƒã‚’ç´ æ—©ãç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/bookwith.git
cd bookwith

# 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm i

# 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
cd apps/api
cp src/config/.env.example src/config/.env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š

# 4. Supabase ã®èµ·å‹•ï¼ˆåˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ï¼‰
supabase start

# 5. Docker ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•
cd apps/api
make docker.up

# 6. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ï¼ˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æˆ»ã£ã¦ï¼‰
cd ../..
pnpm dev
```

ã“ã‚Œã§ä»¥ä¸‹ã® URL ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ï¼š

- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:7127
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API: http://localhost:8000
- API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: http://localhost:8000/docs

## ğŸ“‹ è©³ç´°ãªç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# GitHubã‹ã‚‰ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-org/bookwith.git
cd bookwith

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ¢ãƒãƒªãƒå…¨ä½“ï¼‰
pnpm i
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆAPIï¼‰ã®ç’°å¢ƒå¤‰æ•°

```bash
cd apps/api
cp src/config/.env.example src/config/.env
```

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ä»¥ä¸‹ã®è¨­å®šã‚’è¡Œã„ã¾ã™ï¼š

```env
# åŸºæœ¬è¨­å®š
PORT=8000

# å¿…é ˆ: OpenAI API ã‚­ãƒ¼
OPENAI_API_KEY=sk-...  # OpenAIã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–å¾—

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³: LangSmithï¼ˆãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ç”¨ï¼‰
LANGCHAIN_API_KEY=ls__...  # LangSmithã‹ã‚‰å–å¾—
LANGSMITH_TRACING=true
LANGSMITH_PROJECT=bookwith

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
# Supabaseãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆï¼ˆ54322ï¼‰ã‚’ä½¿ç”¨
# æ³¨æ„: é€šå¸¸ã®PostgreSQLã®ãƒãƒ¼ãƒˆï¼ˆ5432ï¼‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres

# ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆDocker Composeä½¿ç”¨æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ï¼‰
GCS_EMULATOR_HOST=http://127.0.0.1:4443

# Memoryè¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§é–‹å§‹å¯èƒ½ï¼‰
MEMORY_BUFFER_SIZE=10
MEMORY_SUMMARIZE_THRESHOLD=50
MEMORY_CHAT_RESULTS=3
MAX_PROMPT_TOKENS=8192
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ç’°å¢ƒå¤‰æ•°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

```bash
cd apps/reader
cp .env.example .env
```

### 3. Docker ç’°å¢ƒã®èµ·å‹•

#### PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSupabaseï¼‰ã®èµ·å‹•

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ Supabase ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚åˆ¥é€” Supabase ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```bash
# Supabaseã®èµ·å‹•ï¼ˆåˆ¥ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆï¼‰
# npx supabase start
# ã¾ãŸã¯
# supabase start

# Supabaseã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
# supabase status
```

**æ³¨æ„**: `apps/api/docker-compose.yml`ã«ã¯ PostgreSQL ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚Supabase ã‚’åˆ¥é€”èµ·å‹•ã—ã¦ãã ã•ã„ã€‚

#### ãã®ä»–ã® Docker ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•

```bash
cd apps/api
make docker.up
```

ã“ã‚Œã«ã‚ˆã‚Šä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¾ã™ï¼š

- **Weaviate** (ãƒ™ã‚¯ãƒˆãƒ« DB): http://localhost:8080
- **GCS ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿**: http://localhost:4443

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–

åˆå›èµ·å‹•æ™‚ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã«å¤‰æ›´ãŒã‚ã£ãŸå ´åˆï¼š

```bash
cd apps/api

# Pythonã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ã§å®Ÿè¡Œ
poetry run python
>>> from src.config.db import init_db
>>> init_db()
>>> exit()
```

ã“ã‚Œã«ã‚ˆã‚Šã€SQLAlchemy ã®ãƒ¢ãƒ‡ãƒ«å®šç¾©ã«åŸºã¥ã„ã¦å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ãŒè‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã™ã€‚

### 5. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆAPIï¼‰ã®èµ·å‹•

```bash
cd apps/api

# åˆå›ã®ã¿: Poetry ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
make configure

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
make run
```

API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç¢ºèªï¼š

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### 6. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®èµ·å‹•

æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ï¼š

```bash
cd apps/reader

# OpenAPI ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰å‹å®šç¾©ã‚’ç”Ÿæˆï¼ˆåˆå›ã¾ãŸã¯ API å¤‰æ›´æ™‚ï¼‰
pnpm openapi:ts

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
pnpm dev
```

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: http://localhost:7127

### 7. å‹•ä½œç¢ºèª

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:7127 ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ePub ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯é¸æŠã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
3. æ›¸ç±ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€å³å´ã®ãƒãƒ£ãƒƒãƒˆãƒ‘ãƒãƒ«ã§ AI ã¨å¯¾è©±

## ğŸ’» é–‹ç™ºãƒ•ãƒ­ãƒ¼

### ã‚³ãƒ¼ãƒ‰å¤‰æ›´æ™‚ã®æµã‚Œ

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™º

1. **ã‚³ãƒ¼ãƒ‰å¤‰æ›´**

   ```bash
   # DDD ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æ„è­˜ã—ã¦é©åˆ‡ãªå ´æ‰€ã«å®Ÿè£…
   # src/domain/    - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
   # src/usecase/   - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
   # src/infrastructure/ - å¤–éƒ¨é€£æº
   # src/presentation/  - API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
   ```

2. **å‹ãƒã‚§ãƒƒã‚¯ã¨ãƒªãƒ³ãƒˆ**

   ```bash
   cd apps/api
   make lint  # MyPy + pre-commit
   ```

3. **API ã®å†èµ·å‹•**
   - FastAPI ã¯è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ã€é€šå¸¸ã¯è‡ªå‹•çš„ã«åæ˜ ã•ã‚Œã¾ã™

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º

1. **ã‚³ãƒ¼ãƒ‰å¤‰æ›´**

   ```bash
   # ä¸»è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
   # src/components/  - Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   # src/hooks/      - ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
   # src/pages/      - ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   # src/lib/        - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
   ```

2. **å‹ãƒã‚§ãƒƒã‚¯**

   ```bash
   cd apps/reader
   pnpm ts:check
   ```

3. **ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰**
   - Next.js ã¯å¤‰æ›´ã‚’è‡ªå‹•æ¤œå‡ºã—ã¦å†èª­ã¿è¾¼ã¿ã—ã¾ã™

### ãƒ“ãƒ«ãƒ‰ã¨ãƒ†ã‚¹ãƒˆ

#### å…¨ä½“ã®ãƒ“ãƒ«ãƒ‰

```bash
# ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§
pnpm build
```

#### ãƒªãƒ³ãƒˆã®å®Ÿè¡Œ

```bash
# å…¨ä½“
pnpm lint

# API ã®ã¿
cd apps/api && make lint

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿
cd apps/reader && pnpm lint
```

### OpenAPI ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°

API ã®å‹å®šç¾©ã‚’å¤‰æ›´ã—ãŸå ´åˆï¼š

```bash
# APIã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§
cd apps/reader
pnpm openapi:ts
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. pnpm install ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
pnpm store prune

# node_modules ã®å‰Šé™¤ã¨å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules pnpm-lock.yaml
pnpm i
```

#### 2. Docker ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ãªã„

```bash
# æ—¢å­˜ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ãƒ»å‰Šé™¤
cd apps/api
docker compose down -v

# ãƒãƒ¼ãƒˆã®ç¢ºèª
lsof -i :8080  # Weaviate
lsof -i :4443  # GCS ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿

# å†èµ·å‹•
make docker.up
```

#### 3. API ãŒèµ·å‹•ã—ãªã„

```bash
# Poetry ã®ç’°å¢ƒã‚’å†æ§‹ç¯‰
cd apps/api
poetry env remove python
poetry install --no-root

# ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
cat src/config/.env  # APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```

#### 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ API ã¨ã®é€šä¿¡ã‚¨ãƒ©ãƒ¼

```bash
# APIãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
curl http://localhost:8000/health

# CORSã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ã€APIã®CORSè¨­å®šã‚’ç¢ºèª
```

#### 5. Weaviate æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# Weaviate ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
curl http://localhost:8080/v1/.well-known/ready

# ãƒ­ã‚°ã®ç¢ºèª
cd apps/api
docker compose logs weaviate
```

#### 6. PostgreSQL/Supabase æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# Supabase ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
supabase status

# ãƒãƒ¼ãƒˆ 54322 ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
lsof -i :54322

# æ¥ç¶šãƒ†ã‚¹ãƒˆ
psql postgresql://postgres:postgres@127.0.0.1:54322/postgres -c "SELECT 1"

# Supabase ãŒèµ·å‹•ã—ã¦ã„ãªã„å ´åˆ
supabase start
```

#### 7. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„ã‚¨ãƒ©ãƒ¼

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã‚’å®Ÿè¡Œ
cd apps/api
poetry run python
>>> from src.config.db import init_db
>>> init_db()
>>> exit()
```

### ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ

1. **API ãƒ­ã‚°ã®ç¢ºèª**

   ```bash
   # FastAPI ã®ãƒ­ã‚°ã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™
   # LangSmith ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹å ´åˆã¯ã€ãƒˆãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‚‚ç¢ºèªå¯èƒ½
   ```

2. **ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«**

   - Network ã‚¿ãƒ–ã§ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª
   - Console ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

3. **Docker ãƒ­ã‚°**
   ```bash
   cd apps/api
   docker compose logs -f  # å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°
   docker compose logs -f weaviate  # Weaviate ã®ã¿
   ```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“æ§‹é€ 

```
bookwith/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/          # FastAPI ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ domain/          # ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼ˆDDDï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ usecase/         # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤
â”‚   â”‚   â”‚   â”œâ”€â”€ infrastructure/  # ã‚¤ãƒ³ãƒ•ãƒ©å±¤
â”‚   â”‚   â”‚   â”œâ”€â”€ presentation/    # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”‚   â””â”€â”€ config/          # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â”œâ”€â”€ Makefile            # ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â””â”€â”€ docker-compose.yml  # Dockerè¨­å®š
â”‚   â”‚
â”‚   â””â”€â”€ reader/       # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/      # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”‚   â”œâ”€â”€ hooks/          # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚       â”‚   â”œâ”€â”€ pages/          # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚       â”‚   â””â”€â”€ lib/            # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/         # å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆå°†æ¥æ‹¡å¼µäºˆå®šï¼‰
â”œâ”€â”€ docs/            # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ package.json     # ãƒ¢ãƒãƒªãƒè¨­å®š
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ turbo.json       # Turboè¨­å®š
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«

- `apps/api/src/domain/` - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- `apps/api/src/usecase/` - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- `apps/api/src/infrastructure/memory/` - AI è¨˜æ†¶ç®¡ç†æ©Ÿèƒ½
- `apps/api/src/presentation/api/` - API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«

- `apps/reader/src/components/viewlets/chat/` - AI å¯¾è©±æ©Ÿèƒ½
- `apps/reader/src/components/Reader.tsx` - ePub ãƒªãƒ¼ãƒ€ãƒ¼ã‚³ã‚¢
- `apps/reader/src/lib/apiHandler/` - API é€šä¿¡å‡¦ç†
- `apps/reader/src/models/reader.ts` - çŠ¶æ…‹ç®¡ç†ï¼ˆValtioï¼‰

## ğŸ¤ è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚³ãƒ¼ãƒ‰è¦ç´„

#### Pythonï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰

1. **ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼**: Black ã‚’ä½¿ç”¨
2. **å‹ãƒã‚§ãƒƒã‚¯**: MyPy ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
3. **å‘½åè¦å‰‡**:
   - ã‚¯ãƒ©ã‚¹å: PascalCase
   - é–¢æ•°ãƒ»å¤‰æ•°: snake_case
   - å®šæ•°: UPPER_SNAKE_CASE

```python
# è‰¯ã„ä¾‹
class BookRepository(ABC):
    def find_by_id(self, book_id: BookId) -> Optional[Book]:
        pass

# æ‚ªã„ä¾‹
class bookRepository:
    def findById(self, bookId):  # å‹ãƒ’ãƒ³ãƒˆãŒãªã„
        pass
```

#### TypeScriptï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

1. **ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼**: Prettier ã‚’ä½¿ç”¨
2. **ãƒªãƒ³ã‚¿ãƒ¼**: ESLint ã®è¨­å®šã«å¾“ã†
3. **å‹å®šç¾©**: å³å¯†ãƒ¢ãƒ¼ãƒ‰ï¼ˆstrict: trueï¼‰

```typescript
// è‰¯ã„ä¾‹
interface BookProps {
  id: string
  title: string
  onSelect?: (id: string) => void
}

// æ‚ªã„ä¾‹
interface BookProps {
  id: any // any å‹ã¯é¿ã‘ã‚‹
  title: string
}
```

### ã‚³ãƒŸãƒƒãƒˆè¦ç´„

Conventional Commits ã‚’æ¨å¥¨ï¼š

```bash
# å½¢å¼
<type>(<scope>): <subject>

# ä¾‹
feat(reader): AIå¯¾è©±æ©Ÿèƒ½ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œã‚’è¿½åŠ 
fix(api): ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’ä¿®æ­£
docs: ç’°å¢ƒæ§‹ç¯‰ã‚¬ã‚¤ãƒ‰ã‚’è¿½åŠ 
refactor(domain): Book ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ”¹å–„
test(usecase): CreateBookUseCase ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
```

#### Type ä¸€è¦§

- `feat`: æ–°æ©Ÿèƒ½
- `fix`: ãƒã‚°ä¿®æ­£
- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã¿ã®å¤‰æ›´
- `style`: ã‚³ãƒ¼ãƒ‰ã®æ„å‘³ã«å½±éŸ¿ã‚’ä¸ãˆãªã„å¤‰æ›´
- `refactor`: ãƒã‚°ä¿®æ­£ã‚„æ©Ÿèƒ½è¿½åŠ ã‚’å«ã¾ãªã„ã‚³ãƒ¼ãƒ‰å¤‰æ›´
- `test`: ãƒ†ã‚¹ãƒˆã®è¿½åŠ ãƒ»ä¿®æ­£
- `chore`: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚„ãƒ„ãƒ¼ãƒ«ã®å¤‰æ›´

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

1. **ãƒ–ãƒ©ãƒ³ãƒå‘½å**: `feature/xxx`, `fix/xxx`, `docs/xxx`
2. **PR ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: ä»¥ä¸‹ã‚’å«ã‚ã‚‹
   - å¤‰æ›´å†…å®¹ã®æ¦‚è¦
   - é–¢é€£ã™ã‚‹ Issue ç•ªå·
   - ãƒ†ã‚¹ãƒˆæ–¹æ³•
   - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆï¼ˆUI å¤‰æ›´ã®å ´åˆï¼‰

### ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒã‚¤ãƒ³ãƒˆ

- [ ] å‹å®‰å…¨æ€§ãŒä¿ãŸã‚Œã¦ã„ã‚‹ã‹
- [ ] DDD ã®åŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹ã‹ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã¯ãªã„ã‹
- [ ] ãƒ†ã‚¹ãƒˆã¯è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [Next.js Documentation](https://nextjs.org/docs)
- [Weaviate Documentation](https://weaviate.io/developers/weaviate)
- [LangChain Documentation](https://python.langchain.com/)

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [CLAUDE.md](../CLAUDE.md) - AI ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆå‘ã‘ã‚¬ã‚¤ãƒ‰
- [backend-architecture.md](./backend-architecture.md) - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°
- [frontend-directory-structure.md](./frontend-directory-structure.md) - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹æˆè©³ç´°

### é–‹ç™ºã«å½¹ç«‹ã¤ãƒ„ãƒ¼ãƒ«

- [Swagger Editor](https://editor.swagger.io/) - OpenAPI ã‚¹ã‚­ãƒ¼ãƒã®ç·¨é›†
- [Weaviate Console](http://localhost:8080/v1/console) - ãƒ™ã‚¯ãƒˆãƒ« DB ã®ç®¡ç†
- [React Developer Tools](https://react.dev/learn/react-developer-tools) - React ãƒ‡ãƒãƒƒã‚°

## ğŸ†˜ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆã¯ï¼š

1. [GitHub Issues](https://github.com/your-org/bookwith/issues) ã§æ—¢å­˜ã®å•é¡Œã‚’æ¤œç´¢
2. æ–°ã—ã„ Issue ã‚’ä½œæˆï¼ˆå†ç¾æ‰‹é †ã‚’å«ã‚ã¦ãã ã•ã„ï¼‰
3. [Discussions](https://github.com/your-org/bookwith/discussions) ã§è³ªå•

---

Happy Coding! ğŸš€
